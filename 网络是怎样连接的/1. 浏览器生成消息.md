# 1. 浏览器生成消息

标签（空格分隔）： 网络 读书笔记 网络是怎样连接的

---

## 生成http请求消息
### 浏览器先解析url
```
http://user:password@www.glasscom.com:80/dir/file1.html
  1         2             3          4          5
```

`http`是协议名， 类似的还有ftp、mailto、file等等， 可以理解为访问方法
- 2=> 用户消息(可省略)
- 3=> web服务器名称
- 4=> 端口号
- 5=> 路径名

表示要访问这个web服务器`4`下面路径名为`5`的文件
### 省略文件名的情况
- `/`代表的是目录
- 如果省略文件，那么通过服务器设置，一般是fangwe`index.html`
- `http://www.lab/glasscom/com`, 如果不写/, 那么默认访问根目录
- `http://www.lab/glasscom/com/whatisthis`, web服务器会先去找文件，如果不存在，再去找同名目录，不存在歧义

### http的基本思路
请求的消息中定义了“对什么”和“进行怎么的操作”和“附带怎样的数据”

- 对什么：成为URI， 存放网页数据的文件名或者一个CGI程序，各种访问目标统称为URI
- 进行怎么样的操作：GET POST HEAD OPTIONS DELETE TRACE CONNECT PUT
- 附带怎么样的数据：POST操作一般要附带表单数据

### 请求消息的生成
请求消息
```
<方法><空格><URI><方法><HTTP方法>   => 1
<字段名><字段值>
。。。。                            => 2
。。。。
<空行>
<消息体>                            => 3
```
1. 请求行， 请求大体信息
2. 请求头， 附加信息
3. 消息体， 向服务器发送的信息，比如POST附带的数据
响应消息
```
<HTTP版本><空格><状态码><方法><响应短语>   => 1
<字段名><字段值>
。。。。                            => 2
。。。。
<空行>
<消息体>                            => 3
```
3. 服务端发送的数据， 消息体的内容作为二进制数据来处理
4. 消息体的格式， 通过Content-type 字段定义（MIME类型）

消息头详细功能参见 
> 17页

**一条请求信息只能写一个uri， 如果需要获取多个文件， 必须对每个文件单独发送一条请求

## 向DNS服务器查询web服务器的IP地址
在浏览器生成http消息之后， 要先根据域名查询到ip地址，在委托操作系统发送消息